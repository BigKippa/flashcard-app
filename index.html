
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flashcard App</title>
  <style>
    body { font-family: sans-serif; background-color: #f9fafb; margin: 0; padding: 0; }
    .card { max-width: 600px; margin: 40px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .question { font-size: 20px; margin-bottom: 20px; }
    .option { display: block; padding: 10px; margin: 10px 0; background: #e2e8f0; border: 2px solid #cbd5e0; border-radius: 5px; cursor: pointer; }
    .option:hover { background: #cbd5e0; }
    .green { background-color: #c6f6d5 !important; border-color: #38a169 !important; }
    .red { background-color: #fed7d7 !important; border-color: #e53e3e !important; }
    .bottom { margin-top: 20px; font-size: 14px; text-align: center; }
    .nav { display: flex; justify-content: space-between; margin-top: 20px; }
    .btn { padding: 8px 16px; background: #4299e1; color: white; border: none; border-radius: 4px; cursor: pointer; }
    .btn:hover { background: #2b6cb0; }
  </style>
</head>
<body>
  <div id="app" class="card"></div>
 <script>
  let flashcards = [];
  let current = 0;
  let scoreCorrect = 0;
  let scoreIncorrect = 0;
  let incorrectAnswers = [];

  // Load external JSON file
  fetch("prepositions_time_beginner_100.json")
    .then(res => res.json())
    .then(data => {
      flashcards = data;
      renderCard();
    })
    .catch(err => {
      console.error("Failed to load flashcards:", err);
      document.getElementById("app").innerHTML = "<p>Failed to load flashcards.</p>";
    });

  function renderCard() {
    const card = flashcards[current];
    const app = document.getElementById("app");
    app.innerHTML = `
      <div class="question">${card.question}</div>
      ${card.options.map(opt => `<button class="option" onclick="checkAnswer(this, '${opt}', '${card.correct}')">${opt}</button>`).join("")}
      <div class="bottom">Card ${current + 1} of ${flashcards.length} | ✅ ${scoreCorrect} ❌ ${scoreIncorrect}</div>
    `;
  }

  function checkAnswer(button, selected, correct) {
    const buttons = document.querySelectorAll(".option");
    buttons.forEach(btn => btn.disabled = true);
    if (selected.toLowerCase() === correct.toLowerCase()) {
      button.classList.add("green");
      scoreCorrect++;
    } else {
      button.classList.add("red");
      scoreIncorrect++;
      incorrectAnswers.push({ question: flashcards[current].question, selected, correct });
    }
    setTimeout(() => {
      current++;
      if (current < flashcards.length) {
        renderCard();
      } else {
        showResults();
      }
    }, 800);
  }

  function showResults() {
    const percent = Math.round((scoreCorrect / flashcards.length) * 100);
    const missed = incorrectAnswers.map(item => `
      <li><strong>Q:</strong> ${item.question}<br>
      ❌ Your answer: ${item.selected}<br>
      ✅ Correct answer: ${item.correct}</li>`).join("");
    document.getElementById("app").innerHTML = `
      <h2>Deck Complete!</h2>
      <p>Score: ${scoreCorrect}/${flashcards.length} (${percent}%)</p>
      <h3>Incorrect Answers</h3>
      <ul>${missed || "<li>No missed questions – great job!</li>"}</ul>
      <button onclick="location.reload()">Restart</button>
    `;
  }
</script>

</body>
</html>
